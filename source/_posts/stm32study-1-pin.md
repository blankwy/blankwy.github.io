---
abbrlink: stm32-basepin-and-gpio
categories:
- - [技术学习,硬件]
date: '2025-10-28T15:02:52.557356+08:00'
tags:
- 编程
- 学习
- stm32
- 单片机
title: STM32核心引脚与GPIO - STM32学习笔记
updated: '2025-10-28T15:02:57.289+08:00'
---
# 电源引脚

## VDD

D=device，正电源电压

## VSS

S=series，公共接（数）地或负电源电压。

## VDDA/VSSA

相应，VDDA、VSSA则为模电中的方案，VSSA接入模拟地

## VBAT

在主电源断开时为 RTC（实时时钟）和备份寄存器供电。确保在主电源断开时，RTC 和备份寄存器的内容不会丢失。


1. **没有外部电池**：如果应用中没有使用外部电池，VBAT 必须连接到 VDD 引脚上。
2. **没有外部电池且需要稳定供电**：如果没有外部电池，VBAT 引脚必须和 100nF 的陶瓷电容一起连接到 VDD 电源上。
3. **使用外部电池**：当使用外部电池时，VBAT 引脚可以直接连接到电池上，以在主电源断开时为 RTC 和备份寄存器供电。

# 时针引脚

`OSC_IN`/`OSC_OUT` (HSE：高速外部时钟，频率高)

`OSC32_IN`/`OSC32_OUT` (LSE：低速外部时钟，功耗低)

外部高速晶体振荡器（crystal oscillator）的输入和输出引脚。这些引脚用于连接外部晶体振荡器，以提供精确的时钟信号给单片机。

# 复位引脚

`NRST`，在保存一定信息状态的情况下（相比重新上电）使系统的大部分寄存器(包括PC指针）重置。

# 启动配置引脚

`BOOT0`、`BOOT1`，选择芯片复位后的启动模式

`BOOT0=0`（用户闪存）为正常运行模式；

`BOOT0=1`用于系统编程，主要用于通过串口或其他接口下载程序到Flash中。

`BOOT0=1, BOOT1=1`SRAM启动模式,快速加载程序到SRAM中进行测试，避免频繁擦写Flash，提高调试效率。(SRAM无法保存数据)

# 调试编程引脚

`SWDIO`、`SWCLK`，程序下载、在线调试和代码跟踪。SWD是主流选择，仅需2线；占用资源少，连接方便。

# 串行通信接口

#### 1. UART / USART（异步串口）

这是最基础、最常用的串口，通常被称为“串口”。

- **通信方式**：**异步**。通信双方需要预先约定相同的**波特率**（每秒传输的比特数），没有共享的时钟线。
- **物理接口**：通常只需 **TX（发送）** 和 **RX（接收）** 两根数据线，采用**TTL电平**（如3.3V）。
- **关键概念**：
  - **波特率**：如9600， 115200等。双方必须一致。
  - **数据位**：通常为8位。
  - **停止位**：通常为1位。
  - **校验位**：可选，用于简单的错误检测。
- **与PC通信**：PC的串口是**RS232电平**（±12V），需要通过 **“USB转TTL串口”模块**（如CH340、CP2102芯片）进行电平转换才能与STM32连接。
- 
  #### 2. I2C（Inter-Integrated Circuit）

  I2C非常适合连接电路板上多个低速外设。
  - **通信方式**：**同步**。有专用的时钟线SCL，由主机产生。
  - **物理接口**：仅需两根线——**SDA（数据线）** 和 **SCL（时钟线）**。都需要接上拉电阻（通常4.7kΩ）。
  - **关键特性**：
    - **地址寻址**：每个从机设备都有一个7位或10位的唯一地址，主机通过发送地址来选择通信对象。
    - **多主机仲裁**：支持多个主机连接在同一总线上，通过仲裁机制避免冲突。
    - **半双工**：同一时刻只能单向传输数据。

  #### 3. SPI（Serial Peripheral Interface）

  SPI是高速全双工通信的首选。
  - **通信方式**：**同步**，全双工。
  - **物理接口**：至少四根线：
    - **SCK**： 时钟信号，由主机产生。
    - **MOSI**： 主机发送，从机接收。
    - **MISO**： 主机接收，从机发送。
    - **CS/SS**： 从机片选信号，低电平有效。**每个从机都需要一个独立的CS线**。
  - **关键特性**：
    - **高速**：通信速率通常远高于I2C和UART。
    - **全双工**：可以同时进行数据的发送和接收。
    - **无设备地址**：通过硬件片选线选择从机。

    # **模拟功能引脚**
  - `ADC_INx /DAC_OUTx`模数/数模转换，处理模拟信号。

# GPIO (General-purpose input/output)

> 即输入输出引脚，是芯片与外部联系的接口。

**输入模式**：读取外部信号状态，如检测按键是否被按下。

**输出模式**：控制外部设备，如点亮LED或驱动蜂鸣器。

## 工作模式

由Ai总结表格

|模式名称 |核心特点 |典型应用场景 |
|---|---|---|
|**浮空输入**(FloatingInput) |电平完全由外部电路决定，内部无上拉/下拉电阻。<br />**引脚悬空时电平不确定**，易受干扰。 |接有**连续、稳定驱动源**的信号，如UART的RX引脚接收数据。 |
|**上拉输入**(Pull-up Input) |内部电阻将引脚默认拉到**高电平**。<br />无外部信号时，引脚状态稳定为高。 |**按键检测**（按键另一端接地），未按下时读为高电平，按下后读为低电平。 |
|**下拉输入**(Pull-downInput) |内部电阻将引脚默认拉到**低电平**。<br />无外部信号时，引脚状态稳定为低。 |检测**高电平有效**的传感器信号，如霍尔传感器。 |
|**模拟输入**(Analog Input) |信号**不经过**数字电路（施密特触发器），<br />直接接入片内ADC等模拟外设。 |**ADC采集**，用于读取模拟传感器（如光敏电阻、电位器）的电压值。 |
|**推挽输出***(Push-PullOutput) |**最常用输出模式**。<br />能**主动输出**强力的高电平（VDD）和低电平（GND），驱动能力强。 |驱动LED、蜂鸣器，以及**SPI、UART的TX****引脚**等需要高速开关的场合。 |
|**开漏输出***(Open-Drain Output) |只能**主动输出低电平**。高电平时呈高阻态，<br />需**外部上拉电阻**才能得到高电平。 |**I2C总线**（支持“线与”）、**电平转换**（如3.3V单片机控制5V设备）。 |
|**复用推挽输出**(AlternatePush-Pull) |引脚控制权交给**片上的专用外设**（如SPI、USB），<br />输出特性同推挽输出。 |用于**SPI、USB**等片上外设的输出引脚。 |
|**复用开漏输出**(AlternateOpen-Drain) |引脚控制权交给**片上的专用外设**（如I2C），<br />输出特性同开漏输出。 |用于**I2C**等片上外设的输出引脚。 |

其中**推挽输出**、开漏输出最常用

横向对比：

|特性 |推挽输出 |开漏输出 |
|---|---|---|
|核心结构 |两个互补的MOSFET（上管P型，下管N型） |单个MOSFET（通常为N型），漏极开路 |
|输出能力 |**能主动输****出高电平和低电平** |只能主动输出低电平，高电平需靠**外部上拉电阻** |
|驱动能力 |**强**，可提供较大电流 |较弱，高电平驱动能力取决于上拉电阻 |
|开关速度 |**快**，由内部电路主动驱动 |较慢，受上拉电阻和负载电容影响 |
|线与功能 |**不支持**，直接并联可能短路 |**支持**，方便实现总线逻辑 |
|**外部****元件** |通常无需外部元件 |**必须****外接上拉电阻** |
|静态功耗 |较低（静态时电流很小） |低（高阻态时几乎无电流） |


